webpackJsonp([12],{"+pL6":function(e,t){},0:function(e,t){},1:function(e,t){},"457U":function(e,t){},"A/7e":function(e,t){},"A/kt":function(e,t){},BtRb:function(e,t,n){"use strict";t.l=function(){return Object(i.a)({url:a.default.prototype.$baseUrl+"api/v1.0/sys/resource/tree",method:"get"})},t.a=function(e){return Object(i.a)({url:a.default.prototype.$baseUrl+"/api/v1.0/sys/resource",method:"post",data:e})},t.i=function(e){return Object(i.a)({url:a.default.prototype.$baseUrl+"api/v1.0/sys/resource",method:"put",data:e})},t.f=function(e){return Object(i.a)({url:a.default.prototype.$baseUrl+"api/v1.0/sys/resource/"+e,method:"delete"})},t.n=function(e){return Object(i.a)({url:a.default.prototype.$baseUrl+"api/v1.0/sys/role/pager",method:"get",params:e})},t.b=function(e){return Object(i.a)({url:a.default.prototype.$baseUrl+"api/v1.0/sys/role",method:"post",data:e})},t.m=function(e){return Object(i.a)({url:a.default.prototype.$baseUrl+"api/v1.0/sys/role/"+e,method:"get"})},t.j=function(e){return Object(i.a)({url:a.default.prototype.$baseUrl+"api/v1.0/sys/role",method:"put",data:e})},t.g=function(e){return Object(i.a)({url:a.default.prototype.$baseUrl+"api/v1.0/sys/role/"+e,method:"delete"})},t.p=function(e){return Object(i.a)({url:a.default.prototype.$baseUrl+"api/v1.0/sys/user/pager",method:"get",params:e})},t.e=function(e){return Object(i.a)({url:a.default.prototype.$baseUrl+"api/v1.0/sys/user/check/username",method:"get",params:e})},t.d=function(e){return Object(i.a)({url:a.default.prototype.$baseUrl+"api/v1.0/sys/user/check/staffno",method:"get",params:e})},t.c=function(e){return Object(i.a)({url:a.default.prototype.$baseUrl+"api/v1.0/sys/user",method:"post",data:e})},t.h=function(e){return Object(i.a)({url:a.default.prototype.$baseUrl+"api/v1.0/sys/user/"+e,method:"delete"})},t.k=function(e){return Object(i.a)({url:a.default.prototype.$baseUrl+"api/v1.0/sys/user",method:"put",data:e})},t.o=function(e){return Object(i.a)({url:a.default.prototype.$baseUrl+"api/v1.0/sys/user/"+e,method:"get",data:e})},t.q=function(e){return Object(i.a)({url:a.default.prototype.$baseUrl+"api/v1.0/auth/updatePwd",method:"post",data:e})};var i=n("vLgD"),a=n("yf3K");n("IcnI")},CRao:function(e,t){},E4LH:function(e,t,n){"use strict";t.a=function(e){return/^(https?:|mailto:|tel:)/.test(e)},t.c=function(e){var t={},n=s()(e);n&&n.length>0&&n.forEach(function(n){"object"==a()(e[n])?e[n]&&e[n].length>0&&(t[n]=e[n]):"string"==typeof e[n]?e[n]&&""!=e[n]&&e[n].length>0&&(t[n]=e[n]):"boolean"==typeof e[n]?t[n]=e[n]:"number"==typeof e[n]?t[n]=e[n]:void 0!==e[n]&&(t[n]=e[n])});return t},t.b=function(e){return e?(e/1e3).toFixed(3):0};var i=n("hRKE"),a=n.n(i),r=n("ZLEe"),s=n.n(r)},HBSQ:function(e,t){},IcnI:function(e,t,n){"use strict";var i=n("yf3K"),a=n("bSIt"),r=n("sqb0"),s=n.n(r),o={state:{sidebar:{opened:!s.a.get("sidebarStatus")||!!+s.a.get("sidebarStatus"),withoutAnimation:!1},device:"desktop",recordSrc:"",showDialog:!1,showDrawer:!1},mutations:{TOGGLE_SIDEBAR:function(e){e.sidebar.opened=!e.sidebar.opened,e.sidebar.withoutAnimation=!1,e.sidebar.opened?s.a.set("sidebarStatus",1):s.a.set("sidebarStatus",0)},CLOSE_SIDEBAR:function(e,t){s.a.set("sidebarStatus",0),e.sidebar.opened=!1,e.sidebar.withoutAnimation=t},TOGGLE_DEVICE:function(e,t){e.device=t},setRecordSrc:function(e,t){e.recordSrc=t}},actions:{toggleSideBar:function(e){(0,e.commit)("TOGGLE_SIDEBAR")},closeSideBar:function(e,t){(0,e.commit)("CLOSE_SIDEBAR",t.withoutAnimation)},toggleDevice:function(e,t){(0,e.commit)("TOGGLE_DEVICE",t)},setRecordSrc:function(e,t){(0,e.commit)("setRecordSrc",t)}}},c={token:function(e){return e.user.token},sidebar:function(e){return e.app.sidebar},device:function(e){return e.app.device},avatar:function(e){return e.user.avatar},name:function(e){return e.user.name},roles:function(e){return e.user.roles},user:function(e){return e.user.userData},menus:function(e){return e.user.menus},addRouters:function(e){return e.permission.addRouters},visitedViews:function(e){return e.tagsView.visitedViews},cachedViews:function(e){return e.tagsView.cachedViews},agentState:function(e){return e.chat.agentState},recordSrc:function(e){return e.app.recordSrc},showDialog:function(e){return e.app.showDialog},showDrawer:function(e){return e.app.showDrawer}},u=n("rVsN"),l=n.n(u),d=n("TIfe"),h=n("+CHF"),f=n("vLgD"),p={state:{user:"",token:Object(d.c)(),name:"",roles:"",avatar:"",userData:Object(d.d)(),buttons:Object(d.a)(),menus:[],setting:{articlePlatform:[]}},mutations:{SET_USERDATA:function(e,t){e.userData=t},SET_TOKEN:function(e,t){e.token=t},SET_NAME:function(e,t){e.name=t},SET_AVATAR:function(e,t){e.avatar=t},SET_ROLES:function(e,t){e.roles=t},SET_BUTTONS:function(e,t){e.buttons=t},SET_MENUS:function(e,t){e.menus=t}},actions:{LoginByUsername:function(e,t){var n=e.commit;return new l.a(function(e,a){var r=t.username.trim();Object(f.a)({url:i.default.prototype.$baseUrl+"api/v1.0/auth/grantToken",method:"post",headers:{},data:{username:r,password:t.password}}).then(function(t){if(!t||-1==t.code)return Object(h.Message)({message:t.message,type:"error",duration:3e3}),!1;var a=t.data.access_token;Object(f.a)({url:i.default.prototype.$baseUrl+"api/v1.0/auth/userInfo",method:"get",headers:{Authorization:a}}).then(function(t){if(!t||0==!t.status)return Object(h.Message)({message:t.msg,type:"error",duration:3e3}),!1;var i=t.data||{};i.token=a,n("SET_TOKEN",a),Object(d.i)(i.token),n("SET_USERDATA",i),Object(d.j)(i),n("SET_BUTTONS",Object(d.a)(i)),e(i)})}).catch(function(e){a(e)})})},setUserPhoto:function(e,t){var n=e.commit,i=Object(d.d)();n("SET_TOKEN",i.token),n("SET_USERDATA",i),n("SET_AVATAR",t.photo),i.photo=t.fileId,Object(d.j)(i)},GetUserInfo:function(e){var t=e.commit,n=e.state.userData;return new l.a(function(e,i){t("SET_ROLES",n.permissions),t("SET_MENUS",Object(d.b)(n.permissions)),t("SET_NAME",n.realName),t("SET_AVATAR",null),e(n.permissions)}).catch(function(e){})},LogOut:function(e){var t=e.commit,n=e.state;return new l.a(function(e,a){var r=n.userData;Object(f.a)({url:i.default.prototype.$baseUrl+"api/v1.0/auth/logout",method:"post",headers:{Authorization:r.token},data:{token:r.token}}).then(function(n){if(!n||0==!n.data.status)return Object(h.Message)({message:n.data.message,type:"error",duration:3e3}),!1;t("SET_TOKEN",""),t("SET_ROLES",[]),Object(d.g)(),Object(d.h)(),e()}).catch(function(e){a(e)})})},FedLogOut:function(e){var t=e.commit;return new l.a(function(e){t("SET_TOKEN",""),Object(d.g)(),Object(d.h)(),e()})}}},m=n("IHPB"),v=n.n(m),g=n("HzJ8"),w=n.n(g),b=n("KH7x"),y=n.n(b),S=n("aA9S"),_=n.n(S),C={state:{visitedViews:[],cachedViews:[]},mutations:{ADD_VISITED_VIEW:function(e,t){e.visitedViews.some(function(e){return e.path===t.path})||e.visitedViews.push(_()({},t,{title:t.meta.title||"no-name"}))},ADD_CACHED_VIEW:function(e,t){e.cachedViews.includes(t.name)||t.meta.noCache||e.cachedViews.push(t.name)},DEL_VISITED_VIEW:function(e,t){var n=!0,i=!1,a=void 0;try{for(var r,s=w()(e.visitedViews.entries());!(n=(r=s.next()).done);n=!0){var o=r.value,c=y()(o,2),u=c[0];if(c[1].path===t.path){e.visitedViews.splice(u,1);break}}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}},DEL_CACHED_VIEW:function(e,t){var n=!0,i=!1,a=void 0;try{for(var r,s=w()(e.cachedViews);!(n=(r=s.next()).done);n=!0){var o=r.value;if(o===t.name){var c=e.cachedViews.indexOf(o);e.cachedViews.splice(c,1);break}}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}},DEL_OTHERS_VISITED_VIEWS:function(e,t){e.visitedViews=e.visitedViews.filter(function(e){return e.meta.affix||e.path===t.path})},DEL_OTHERS_CACHED_VIEWS:function(e,t){var n=!0,i=!1,a=void 0;try{for(var r,s=w()(e.cachedViews);!(n=(r=s.next()).done);n=!0){var o=r.value;if(o===t.name){var c=e.cachedViews.indexOf(o);e.cachedViews=e.cachedViews.slice(c,c+1);break}}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}},DEL_ALL_VISITED_VIEWS:function(e){var t=e.visitedViews.filter(function(e){return e.meta.affix});e.visitedViews=t},DEL_ALL_CACHED_VIEWS:function(e){e.cachedViews=[]},UPDATE_VISITED_VIEW:function(e,t){var n=!0,i=!1,a=void 0;try{for(var r,s=w()(e.visitedViews);!(n=(r=s.next()).done);n=!0){var o=r.value;if(o.path===t.path){o=_()(o,t);break}}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}}},actions:{addView:function(e,t){var n=e.dispatch;n("addVisitedView",t),n("addCachedView",t)},addVisitedView:function(e,t){(0,e.commit)("ADD_VISITED_VIEW",t)},addCachedView:function(e,t){(0,e.commit)("ADD_CACHED_VIEW",t)},delView:function(e,t){var n=e.dispatch,i=e.state;return new l.a(function(e){n("delVisitedView",t),n("delCachedView",t),e({visitedViews:[].concat(v()(i.visitedViews)),cachedViews:[].concat(v()(i.cachedViews))})})},delVisitedView:function(e,t){var n=e.commit,i=e.state;return new l.a(function(e){n("DEL_VISITED_VIEW",t),e([].concat(v()(i.visitedViews)))})},delCachedView:function(e,t){var n=e.commit,i=e.state;return new l.a(function(e){n("DEL_CACHED_VIEW",t),e([].concat(v()(i.cachedViews)))})},delOthersViews:function(e,t){var n=e.dispatch,i=e.state;return new l.a(function(e){n("delOthersVisitedViews",t),n("delOthersCachedViews",t),e({visitedViews:[].concat(v()(i.visitedViews)),cachedViews:[].concat(v()(i.cachedViews))})})},delOthersVisitedViews:function(e,t){var n=e.commit,i=e.state;return new l.a(function(e){n("DEL_OTHERS_VISITED_VIEWS",t),e([].concat(v()(i.visitedViews)))})},delOthersCachedViews:function(e,t){var n=e.commit,i=e.state;return new l.a(function(e){n("DEL_OTHERS_CACHED_VIEWS",t),e([].concat(v()(i.cachedViews)))})},delAllViews:function(e,t){var n=e.dispatch,i=e.state;return new l.a(function(e){n("delAllVisitedViews",t),n("delAllCachedViews",t),e({visitedViews:[].concat(v()(i.visitedViews)),cachedViews:[].concat(v()(i.cachedViews))})})},delAllVisitedViews:function(e){var t=e.commit,n=e.state;return new l.a(function(e){t("DEL_ALL_VISITED_VIEWS"),e([].concat(v()(n.visitedViews)))})},delAllCachedViews:function(e){var t=e.commit,n=e.state;return new l.a(function(e){t("DEL_ALL_CACHED_VIEWS"),e([].concat(v()(n.cachedViews)))})},updateVisitedView:function(e,t){(0,e.commit)("UPDATE_VISITED_VIEW",t)}}},E=n("YaEn"),x={state:{routers:[],addRouters:[]},mutations:{SET_ROUTERS:function(e,t){e.addRouters=t,e.routers=E.b.concat(t)}},actions:{GenerateRoutes:function(e,t){var n=e.commit;return new l.a(function(e){var t;t=E.a,n("SET_ROUTERS",t),e()})}}};i.default.use(a.a);var I=new a.a.Store({modules:{app:o,user:p,tagsView:C,permission:x},getters:c});t.a=I},JkeP:function(e,t){},Kg7K:function(e,t){},MIXt:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("ZLEe"),a=n.n(i),r=n("yf3K"),s={name:"app",data:function(){return{}},mounted:function(){},components:{},methods:{init:function(){var e=this.$store.state.user.userData.name,t=document.createElement("canvas");t.id="canvas",t.width="200",t.height="130",this.maskDiv=document.createElement("div");var n=t.getContext("2d");n.font="normal 18px Microsoft Yahei",n.fillStyle="rgba(112, 113, 114, 0.1)",n.rotate(30*Math.PI/180),n.fillText(e,30,20);var i=t.toDataURL("image/png");this.maskDiv.style.position="fixed",this.maskDiv.style.zIndex="9999",this.maskDiv.id="_waterMark",this.maskDiv.style.top="30px",this.maskDiv.style.left="0",this.maskDiv.style.height="100%",this.maskDiv.style.width="100%",this.maskDiv.style.pointerEvents="none",this.maskDiv.style.backgroundImage="URL("+i+")",document.body.appendChild(this.maskDiv)}}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var c=n("C7Lr")(s,o,!1,function(e){n("i3vg")},null,null).exports,u=n("+CHF"),l=n.n(u),d=n("sqb0"),h=n.n(d),f=n("Q0Ca"),p=n("YaEn"),m=n("IcnI"),v=(n("457U"),n("Kg7K"),n("yh13"),n("HBSQ"),n("4YfN")),g=n.n(v),w=n("E4C3"),b=n.n(w),y=(n("ve9D"),n("TIfe"));b.a.configure({showSpinner:!1});var S=["/login"];p.c.beforeEach(function(e,t,n){b.a.start(),Object(y.c)()?"/login"===e.path?(n({path:"/"}),b.a.done()):0===m.a.getters.roles.length?m.a.dispatch("GetUserInfo").then(function(t){var n=t;n&&n.length>0||(u.Message.error("对不起，当前用户没有权限"),m.a.dispatch("FedLogOut").then(function(){p.c.replace("/login?redirect="+e.path),b.a.done()})),m.a.dispatch("GenerateRoutes",{roles:n}).then(function(){p.c.addRoutes(m.a.getters.addRouters),Object(y.f)(n,e)?(p.c.push(g()({},e,{replace:!0}),function(e){}),b.a.done()):(p.c.replace("/401"),b.a.done())}).catch(function(e){b.a.done()})}).catch(function(t){m.a.dispatch("FedLogOut").then(function(){u.Message.error(t),p.c.replace("/login?redirect="+e.path),b.a.done()})}):Object(y.f)(m.a.getters.roles,e)?n():(p.c.replace("/401"),b.a.done()):-1!==S.indexOf(e.path)?n():(n("/login?redirect="+e.path),b.a.done())}),p.c.afterEach(function(){b.a.done()});var _=n("L+OJ"),C=n.n(_);n("LbpY"),n("EP0S");var E=n("aA9S"),x=n.n(E),I=n("FR1n"),T=n("4fC4");x()(u.Table.components.TableBody.methods,{handleCellMouseLeave:function(){var e=this.$refs.tooltip;if(e&&e.expectedState&&(e.setExpectedState(!1),clearTimeout(e._timeoutLeave),e._timeoutLeave=setTimeout(function(){e.expectedState||e.handleClosePopper()},150)),Object(I.a)(event)){var t=this.table.hoverState||{};this.table.$emit("cell-mouse-leave",t.row,t.column,t.cell,event)}},handleCellMouseEnter:function(e,t){var n=this,i=this.table,a=Object(I.a)(e),r=this.$refs.tooltip;if(a){var s=Object(I.b)(i,a),o=i.hoverState={cell:a,column:s,row:t};i.$emit("cell-mouse-enter",o.row,o.column,o.cell,e)}var c=e.target.querySelector(".cell");if(Object(T.b)(c,"el-tooltip")&&c.childNodes.length){var u=document.createRange();if(u.setStart(c,0),u.setEnd(c,c.childNodes.length),(u.getBoundingClientRect().width+((parseInt(Object(T.a)(c,"paddingLeft"),10)||0)+(parseInt(Object(T.a)(c,"paddingRight"),10)||0))>c.offsetWidth||c.scrollWidth>c.offsetWidth)&&this.$refs.tooltip){clearTimeout(r._timeoutEnter),r._timeoutEnter=setTimeout(function(){!r.expectedState&&(n.tooltipContent=a.innerText||a.textContent,r.referenceElm=a,r.$refs.popper&&(r.$refs.popper.style.display="none"),r.doDestroy(),r.setExpectedState(!0),n.activateTooltip(r))},500)}}else setTimeout(function(){r.setExpectedState(!1),r.handleClosePopper()},600)}});var D={name:"commonTable",props:{columns:Array,data:Array,pager:Object,maxHeight:{type:Number,default:2e3}},methods:{handleSelectionChange:function(e){this.$emit("handleSelectionChange",e)},handleSizeChange:function(e){this.$emit("handleSizeChange",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)},formatterValue:function(e,t,n){return n}}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"commonTable"}},[n("el-table",{attrs:{data:e.data,"max-height":e.maxHeight,border:"",stripe:"","tooltip-effect":"light"},on:{"selection-change":e.handleSelectionChange}},[e._t("table_first"),e._v(" "),e._l(e.columns,function(t,i){return[0!=t.show?n("el-table-column",{key:i,attrs:{prop:t.prop,label:t.label,align:t.align?t.align:"center",width:t.width,fixed:!!t.fixed&&t.fixed,type:t.type?t.type:"",formatter:t.formatter?t.formatter:e.formatterValue,"show-overflow-tooltip":!!t.showTooltip&&t.showTooltip}}):e._e()]}),e._v(" "),e._t("table_operation")],2),e._v(" "),e.pager?n("el-pagination",{staticStyle:{"text-align":"center",margin:"20px 0"},attrs:{"current-page":e.pager.pageNo,"page-size":e.pager.pageSize,"page-sizes":e.pager.sizes,total:e.pager.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)},staticRenderFns:[]},$=n("C7Lr")(D,k,!1,null,null,null).exports,V={install:function(e){e.component("commonTable",$)}},O=n("HixS"),L=n.n(O),A=n("E4LH"),M=n("ZSMC"),R=n("CzKQ"),j=n.n(R);r.default.directive("dialogDrag",{bind:function(e,t,n,i){var a=e.querySelector(".el-dialog__header"),r=e.querySelector(".el-dialog");a.style.cursor="move";var s=r.currentStyle||window.getComputedStyle(r,null);a.onmousedown=function(e){var t=e.clientX-a.offsetLeft,n=e.clientY-a.offsetTop,i=void 0,o=void 0;s.left.includes("%")?(i=+document.body.clientWidth*(+s.left.replace(/\%/g,"")/100),o=+document.body.clientHeight*(+s.top.replace(/\%/g,"")/100)):(i=+s.left.replace(/\px/g,""),o=+s.top.replace(/\px/g,"")),document.onmousemove=function(e){var a=e.clientX-t,s=e.clientY-n;r.style.left=a+i+"px",r.style.top=s+o+"px"},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}}),r.default.component("downloadExcel",M.a),r.default.use(V),r.default.prototype.$axios=C.a,r.default.prototype.$cookies=L.a,r.default.prototype.$baseUrl="http://oss-server.xb-sms.com/",r.default.prototype.$phoneBarConf=Object({}),r.default.prototype.$nullParam=A.c,r.default.prototype.$price=A.b,window.$day=j.a,window.$price=A.b,r.default.prototype.$hasPermission=y.e,r.default.use(l.a,{size:h.a.get("size")||"medium"}),C.a.defaults.withCredentials=!0,a()(f).forEach(function(e){r.default.filter(e,f[e])}),r.default.config.productionTip=!1,new r.default({router:p.c,store:m.a,render:function(e){return e(c)}}).$mount("#app")},OPLz:function(e,t){},Q0Ca:function(e,t){e.exports={formatDate:function(e){return e?new $day(e).format("YYYY-MM-DD HH:mm:ss"):""},formatTimestamp:function(e){return e?new $day(1e3*e).format("YYYY-MM-DD HH:mm:ss"):""},timeFormat:function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}}},TIfe:function(e,t,n){"use strict";t.c=function(){return s.a.get(c)},t.i=function(e){return s.a.set(c,e)},t.g=function(){return s.a.remove(c)},t.d=function(){if(localStorage.getItem(u))return JSON.parse(localStorage.getItem(u))},t.a=d,t.e=function(e){var t=d();return t&&-1!=t.indexOf(e)},t.j=function(e){return localStorage.setItem(u,a()(e))},t.h=function(){return localStorage.removeItem(u)},t.b=function(e){var t=new Array;e.forEach(function(e){"MENU"==e.type&&(null!=e.parentId&&""!=e.parentId||t.push(e))}),t.length>0&&t.forEach(function(t){t.children=function e(t,n){var i=new Array;n.forEach(function(e){"MENU"==e.type&&e.parentId&&e.parentId==t&&i.push(e)});i.forEach(function(t){t.children=e(t.id,n)});if(0==i.length)return null;return i}(t.id,e)});return t},t.f=function(e,t){var n=!1,i=t.path.trim();if(-1!=l.indexOf(i))return!0;return o.b.forEach(function(e){e.path.trim()==i&&(n=!0)}),n||(e.forEach(function(e){e.url==i&&(n=!0)}),n)};var i=n("3cXf"),a=n.n(i),r=n("sqb0"),s=n.n(r),o=n("YaEn"),c="token",u="__SMS__CRM__USERDATA__",l=["/dashboard"];function d(){var e=JSON.parse(localStorage.getItem(u)),t=[];e&&e.permissions&&(t=e.permissions.filter(function(e){return"BUTTON"==e.type}).map(function(e){return e.code}));return t}},WG8t:function(e,t){},WdgD:function(e,t){},YaEn:function(e,t,n){"use strict";var i=n("IHPB"),a=n.n(i),r=n("yf3K"),s=n("CfPM"),o=n("4YfN"),c=n.n(o),u=n("bSIt"),l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-breadcrumb",{staticClass:"app-breadcrumb",attrs:{separator:"/"}},[n("transition-group",{attrs:{name:"breadcrumb"}},e._l(e.levelList,function(t,i){return n("el-breadcrumb-item",{key:t.path},[n("a",[e._v(e._s(t.meta.title))])])}),1)],1)},staticRenderFns:[]};var d=n("C7Lr")({data:function(){return{levelList:null}},watch:{$route:function(){this.getBreadcrumb()}},created:function(){this.getBreadcrumb()},methods:{getBreadcrumb:function(){var e=this.$route.matched.filter(function(e){return e.name});this.levelList=e.filter(function(e){return e.meta&&e.meta.title&&!1!==e.meta.breadcrumb})}}},l,!1,function(e){n("MIXt")},"data-v-1161e550",null).exports,h={name:"Hamburger",props:{isActive:{type:Boolean,default:!1},toggleClick:{type:Function,default:null}}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{padding:"0 15px"},on:{click:this.toggleClick}},[t("i",{staticClass:"fa fa-indent fa-lg",attrs:{width:"64",height:"64"}})])},staticRenderFns:[]};var p=n("C7Lr")(h,f,!1,function(e){n("eTQh")},"data-v-88e4c26a",null).exports,m=n("GbgF"),v=n.n(m),g={name:"Screenfull",data:function(){return{isFullscreen:!1}},mounted:function(){this.init()},methods:{click:function(){if(!v.a.enabled)return this.$message({message:"you browser can not work",type:"warning"}),!1;v.a.toggle()},init:function(){var e=this;v.a.enabled&&v.a.on("change",function(){e.isFullscreen=v.a.isFullscreen})}}},w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"screenfull"},[t("i",{staticClass:"fa fa-arrows-alt fa-lg",attrs:{title:"全屏"},on:{click:this.click}})])},staticRenderFns:[]},b=n("C7Lr")(g,w,!1,null,null,null).exports,y=n("rVsN"),S=n.n(y),_=n("ZLEe"),C=n.n(_),E=n("hRKE"),x=n.n(E),I=n("aA9S"),T=n.n(I),D=n("dmtU"),k=n("qLWu"),$=n("TXwb"),V=n("5Qu8"),O={props:{field:{type:String,default:"avatar"},ki:{default:0},value:{default:!0},url:{type:String,default:""},params:{type:Object,default:null},headers:{type:Object,default:null},width:{type:Number,default:200},height:{type:Number,default:200},noRotate:{type:Boolean,default:!0},noCircle:{type:Boolean,default:!1},noSquare:{type:Boolean,default:!1},maxSize:{type:Number,default:10240},langType:{type:String,default:"zh"},langExt:{type:Object,default:null},imgFormat:{type:String,default:"png"},imgBgc:{type:String,default:"#fff"},withCredentials:{type:Boolean,default:!1},method:{type:String,default:"POST"}},data:function(){var e=this.imgFormat,t=this.langType,n=this.langExt,i=this.width,a=this.height,r=!0,s=-1===["jpg","png"].indexOf(e)?"jpg":e,o=D.a[t]?D.a[t]:D.a.en,c=k.a[s];return this.imgFormat=s,n&&T()(o,n),"function"!=typeof FormData&&(r=!1),{mime:c,lang:o,isSupported:r,isSupportTouch:document.hasOwnProperty("ontouchstart"),step:1,loading:0,progress:0,hasError:!1,errorMsg:"",ratio:i/a,sourceImg:null,sourceImgUrl:"",createImgUrl:"",sourceImgMouseDown:{on:!1,mX:0,mY:0,x:0,y:0},previewContainer:{width:100,height:100},sourceImgContainer:{width:240,height:184},scale:{zoomAddOn:!1,zoomSubOn:!1,range:1,x:0,y:0,width:0,height:0,maxWidth:0,maxHeight:0,minWidth:0,minHeight:0,naturalWidth:0,naturalHeight:0}}},computed:{progressStyle:function(){return{width:this.progress+"%"}},sourceImgStyle:function(){var e=this.scale,t=this.sourceImgMasking;return{top:e.y+t.y+"px",left:e.x+t.x+"px",width:e.width+"px",height:e.height+"px"}},sourceImgMasking:function(){var e=this.width,t=this.height,n=this.ratio,i=this.sourceImgContainer,a=i.width/i.height,r=0,s=0,o=i.width,c=i.height,u=1;return n<a&&(u=i.height/t,o=i.height*n,r=(i.width-o)/2),n>a&&(u=i.width/e,c=i.width/n,s=(i.height-c)/2),{scale:u,x:r,y:s,width:o,height:c}},sourceImgShadeStyle:function(){var e=this.sourceImgMasking,t=this.sourceImgContainer,n=e;return{width:(n.width==t.width?n.width:(t.width-n.width)/2)+"px",height:(n.height==t.height?n.height:(t.height-n.height)/2)+"px"}},previewStyle:function(){this.width,this.height;var e=this.ratio,t=this.previewContainer,n=t.width,i=t.height,a=n/i;return e<a&&(n=t.height*e),e>a&&(i=t.width/e),{width:n+"px",height:i+"px"}}},watch:{value:function(e){e&&1!=this.loading&&this.reset()}},methods:{ripple:function(e){Object(V.a)(e)},off:function(){var e=this;setTimeout(function(){e.$emit("input",!1),3==e.step&&2==e.loading&&e.setStep(1)},200)},setStep:function(e){var t=this;setTimeout(function(){t.step=e},200)},preventDefault:function(e){return e.preventDefault(),!1},handleClick:function(e){1!==this.loading&&e.target!==this.$refs.fileinput&&(e.preventDefault(),document.activeElement!==this.$refs&&this.$refs.fileinput.click())},handleChange:function(e){if(e.preventDefault(),1!==this.loading){var t=e.target.files||e.dataTransfer.files;this.reset(),this.checkFile(t[0])&&this.setSourceImg(t[0])}},checkFile:function(e){var t=this.lang,n=this.maxSize;return-1===e.type.indexOf("image")?(this.hasError=!0,this.errorMsg=t.error.onlyImg,!1):!(e.size/1024>n)||(this.hasError=!0,this.errorMsg=t.error.outOfSize+n+"kb",!1)},reset:function(){this.loading=0,this.hasError=!1,this.errorMsg="",this.progress=0},setSourceImg:function(e){this.$emit("src-file-set",e.name,e.type,e.size);var t=this,n=new FileReader;n.onload=function(e){t.sourceImgUrl=n.result,t.startCrop()},n.readAsDataURL(e)},startCrop:function(){var e=this,t=e.width,n=e.height,i=e.ratio,a=e.scale,r=e.sourceImgUrl,s=e.sourceImgMasking,o=e.lang,c=s,u=new Image;u.src=r,u.onload=function(){var r=u.naturalWidth,s=u.naturalHeight,l=r/s,d=c.width,h=c.height,f=0,p=0;if(r<t||s<n)return e.hasError=!0,e.errorMsg=o.error.lowestPx+t+"*"+n,!1;i>l&&(h=d/l,p=(c.height-h)/2),i<l&&(d=h*l,f=(c.width-d)/2),a.range=0,a.x=f,a.y=p,a.width=d,a.height=h,a.minWidth=d,a.minHeight=h,a.maxWidth=r*c.scale,a.maxHeight=s*c.scale,a.naturalWidth=r,a.naturalHeight=s,e.sourceImg=u,e.createImg(),e.setStep(2)}},imgStartMove:function(e){if(e.preventDefault(),this.isSupportTouch&&!e.targetTouches)return!1;var t=e.targetTouches?e.targetTouches[0]:e,n=this.sourceImgMouseDown,i=this.scale,a=n;a.mX=t.screenX,a.mY=t.screenY,a.x=i.x,a.y=i.y,a.on=!0},imgMove:function(e){if(e.preventDefault(),this.isSupportTouch&&!e.targetTouches)return!1;var t=e.targetTouches?e.targetTouches[0]:e,n=this.sourceImgMouseDown,i=n.on,a=n.mX,r=n.mY,s=n.x,o=n.y,c=this.scale,u=this.sourceImgMasking,l=s+(t.screenX-a),d=o+(t.screenY-r);i&&(l>0&&(l=0),d>0&&(d=0),l<u.width-c.width&&(l=u.width-c.width),d<u.height-c.height&&(d=u.height-c.height),c.x=l,c.y=d)},rotateImg:function(e){var t=this.sourceImg,n=this.scale,i=n.naturalWidth,a=n.naturalHeight,r=a,s=i,o=this.$refs.canvas,c=o.getContext("2d");o.width=r,o.height=s,c.clearRect(0,0,r,s),c.fillStyle="rgba(0,0,0,0)",c.fillRect(0,0,r,s),c.translate(r,0),c.rotate(90*Math.PI/180),c.drawImage(t,0,0,i,a);var u=o.toDataURL(k.a.png);this.sourceImgUrl=u,this.startCrop()},startZoomAdd:function(e){var t=this,n=t.scale;n.zoomAddOn=!0,function e(){if(n.zoomAddOn){var i=n.range>=100?100:++n.range;t.zoomImg(i),setTimeout(function(){e()},60)}}()},endZoomAdd:function(e){this.scale.zoomAddOn=!1},startZoomSub:function(e){var t=this,n=t.scale;n.zoomSubOn=!0,function e(){if(n.zoomSubOn){var i=n.range<=0?0:--n.range;t.zoomImg(i),setTimeout(function(){e()},60)}}()},endZoomSub:function(e){this.scale.zoomSubOn=!1},zoomChange:function(e){this.zoomImg(e.target.value)},zoomImg:function(e){var t=this,n=this.sourceImgMasking,i=(this.sourceImgMouseDown,this.scale),a=i.maxWidth,r=i.maxHeight,s=i.minWidth,o=i.minHeight,c=i.width,u=i.height,l=i.x,d=i.y,h=(i.range,n),f=h.width,p=h.height,m=s+(a-s)*e/100,v=o+(r-o)*e/100,g=f/2-m/c*(f/2-l),w=p/2-v/u*(p/2-d);g>0&&(g=0),w>0&&(w=0),g<f-m&&(g=f-m),w<p-v&&(w=p-v),i.x=g,i.y=w,i.width=m,i.height=v,i.range=e,setTimeout(function(){i.range==e&&t.createImg()},300)},createImg:function(e){var t=this.imgFormat,n=this.imgBgc,i=this.mime,a=this.sourceImg,r=this.scale,s=r.x,o=r.y,c=r.width,u=r.height,l=this.sourceImgMasking.scale,d=this.$refs.canvas,h=d.getContext("2d");e&&(this.sourceImgMouseDown.on=!1),d.width=this.width,d.height=this.height,h.clearRect(0,0,this.width,this.height),h.fillStyle="png"==t?"rgba(0,0,0,0)":n,h.fillRect(0,0,this.width,this.height),h.drawImage(a,s/l,o/l,c/l,u/l),this.createImgUrl=d.toDataURL(i)},prepareUpload:function(){var e=this.url,t=this.createImgUrl,n=this.field,i=this.ki;this.$emit("crop-success",t,n,i),"string"==typeof e&&e?this.upload():this.off()},upload:function(){var e=this,t=this.lang,n=this.imgFormat,i=this.mime,a=this.url,r=this.params,s=this.headers,o=this.field,c=this.ki,u=this.createImgUrl,l=this.withCredentials,d=this.method,h=new FormData;h.append(o,Object($.a)(u,i),o+"."+n),"object"==(void 0===r?"undefined":x()(r))&&r&&C()(r).forEach(function(e){h.append(e,r[e])});var f=function(t){t.lengthComputable&&(e.progress=100*Math.round(t.loaded)/t.total)};e.reset(),e.loading=1,e.setStep(3),new S.a(function(e,t){var n=new XMLHttpRequest;n.open(d,a,!0),n.withCredentials=l,n.onreadystatechange=function(){4===this.readyState&&(200===this.status||201===this.status?e(JSON.parse(this.responseText)):t(this.status))},n.upload.addEventListener("progress",f,!1),"object"==(void 0===s?"undefined":x()(s))&&s&&C()(s).forEach(function(e){n.setRequestHeader(e,s[e])}),n.send(h)}).then(function(t){e.value&&(e.loading=2,e.$emit("crop-upload-success",t,o,c))},function(n){e.value&&(e.loading=3,e.hasError=!0,e.errorMsg=t.fail,e.$emit("crop-upload-fail",n,o,c))})}},created:function(){var e=this;document.addEventListener("keyup",function(t){!e.value||"Escape"!=t.key&&27!=t.keyCode||e.off()})}},L={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"vue-image-crop-upload"},[n("div",{staticClass:"vicp-wrap"},[n("div",{staticClass:"vicp-close",on:{click:e.off}},[n("i",{staticClass:"vicp-icon4"})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1==e.step,expression:"step == 1"}],staticClass:"vicp-step1"},[n("div",{staticClass:"vicp-drop-area",on:{dragleave:e.preventDefault,dragover:e.preventDefault,dragenter:e.preventDefault,click:e.handleClick,drop:e.handleChange}},[n("i",{directives:[{name:"show",rawName:"v-show",value:1!=e.loading,expression:"loading != 1"}],staticClass:"vicp-icon1"},[n("i",{staticClass:"vicp-icon1-arrow"}),e._v(" "),n("i",{staticClass:"vicp-icon1-body"}),e._v(" "),n("i",{staticClass:"vicp-icon1-bottom"})]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:1!==e.loading,expression:"loading !== 1"}],staticClass:"vicp-hint"},[e._v(e._s(e.lang.hint))]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.isSupported,expression:"!isSupported"}],staticClass:"vicp-no-supported-hint"},[e._v(e._s(e.lang.noSupported))]),e._v(" "),1==e.step?n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileinput",attrs:{type:"file"},on:{change:e.handleChange}}):e._e()]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.hasError,expression:"hasError"}],staticClass:"vicp-error"},[n("i",{staticClass:"vicp-icon2"}),e._v(" "+e._s(e.errorMsg)+"\r\n\t\t\t")]),e._v(" "),n("div",{staticClass:"vicp-operate"},[n("a",{on:{click:e.off,mousedown:e.ripple}},[e._v(e._s(e.lang.btn.off))])])]),e._v(" "),2==e.step?n("div",{staticClass:"vicp-step2"},[n("div",{staticClass:"vicp-crop"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"vicp-crop-left"},[n("div",{staticClass:"vicp-img-container"},[n("img",{ref:"img",staticClass:"vicp-img",style:e.sourceImgStyle,attrs:{src:e.sourceImgUrl,draggable:"false"},on:{drag:e.preventDefault,dragstart:e.preventDefault,dragend:e.preventDefault,dragleave:e.preventDefault,dragover:e.preventDefault,dragenter:e.preventDefault,drop:e.preventDefault,touchstart:e.imgStartMove,touchmove:e.imgMove,touchend:e.createImg,touchcancel:e.createImg,mousedown:e.imgStartMove,mousemove:e.imgMove,mouseup:e.createImg,mouseout:e.createImg}}),e._v(" "),n("div",{staticClass:"vicp-img-shade vicp-img-shade-1",style:e.sourceImgShadeStyle}),e._v(" "),n("div",{staticClass:"vicp-img-shade vicp-img-shade-2",style:e.sourceImgShadeStyle})]),e._v(" "),n("div",{staticClass:"vicp-range"},[n("input",{attrs:{type:"range",step:"1",min:"0",max:"100"},domProps:{value:e.scale.range},on:{mousemove:e.zoomChange}}),e._v(" "),n("i",{staticClass:"vicp-icon5",on:{mousedown:e.startZoomSub,mouseout:e.endZoomSub,mouseup:e.endZoomSub}}),e._v(" "),n("i",{staticClass:"vicp-icon6",on:{mousedown:e.startZoomAdd,mouseout:e.endZoomAdd,mouseup:e.endZoomAdd}})]),e._v(" "),e.noRotate?e._e():n("div",{staticClass:"vicp-rotate"},[n("i",{on:{click:e.rotateImg}},[e._v("↻")])])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"vicp-crop-right"},[n("div",{staticClass:"vicp-preview"},[e.noSquare?e._e():n("div",{staticClass:"vicp-preview-item"},[n("img",{style:e.previewStyle,attrs:{src:e.createImgUrl}}),e._v(" "),n("span",[e._v(e._s(e.lang.preview))])]),e._v(" "),e.noCircle?e._e():n("div",{staticClass:"vicp-preview-item vicp-preview-item-circle"},[n("img",{style:e.previewStyle,attrs:{src:e.createImgUrl}}),e._v(" "),n("span",[e._v(e._s(e.lang.preview))])])])])]),e._v(" "),n("div",{staticClass:"vicp-operate"},[n("a",{on:{click:function(t){return e.setStep(1)},mousedown:e.ripple}},[e._v(e._s(e.lang.btn.back))]),e._v(" "),n("a",{staticClass:"vicp-operate-btn",on:{click:e.prepareUpload,mousedown:e.ripple}},[e._v(e._s(e.lang.btn.save))])])]):e._e(),e._v(" "),3==e.step?n("div",{staticClass:"vicp-step3"},[n("div",{staticClass:"vicp-upload"},[n("span",{directives:[{name:"show",rawName:"v-show",value:1===e.loading,expression:"loading === 1"}],staticClass:"vicp-loading"},[e._v(e._s(e.lang.loading))]),e._v(" "),n("div",{staticClass:"vicp-progress-wrap"},[n("span",{directives:[{name:"show",rawName:"v-show",value:1===e.loading,expression:"loading === 1"}],staticClass:"vicp-progress",style:e.progressStyle})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.hasError,expression:"hasError"}],staticClass:"vicp-error"},[n("i",{staticClass:"vicp-icon2"}),e._v(" "+e._s(e.errorMsg)+"\r\n\t\t\t\t")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2===e.loading,expression:"loading === 2"}],staticClass:"vicp-success"},[n("i",{staticClass:"vicp-icon3"}),e._v(" "+e._s(e.lang.success)+"\r\n\t\t\t\t")])]),e._v(" "),n("div",{staticClass:"vicp-operate"},[n("a",{on:{click:function(t){return e.setStep(2)},mousedown:e.ripple}},[e._v(e._s(e.lang.btn.back))]),e._v(" "),n("a",{on:{click:e.off,mousedown:e.ripple}},[e._v(e._s(e.lang.btn.close))])])]):e._e(),e._v(" "),n("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"canvas",attrs:{width:e.width,height:e.height}})])])},staticRenderFns:[]};var A=n("C7Lr")(O,L,!1,function(e){n("OPLz")},null,null).exports,M={render:function(){var e=this.$createElement,t=this._self._c||e;return""!=this.recordSrc?t("div",{staticClass:"record"},[t("div",{staticClass:"audio-box"},[t("div",{staticClass:"close-audio",on:{click:this.closeAudio}},[this._v("×")]),this._v(" "),t("audio",{ref:"recordAudio",attrs:{controlsList:"nodownload",autoplay:"",controls:""},on:{contextmenu:function(e){return e.preventDefault(),(!1).apply(null,arguments)}}},[t("source",{attrs:{src:this.recordSrc}})])])]):this._e()},staticRenderFns:[]};var R=n("C7Lr")({name:"record",computed:{recordSrc:{set:function(e){},get:function(){return this.$store.getters.recordSrc}}},watch:{recordSrc:function(e){this.recordSrc=e}},data:function(){return{}},methods:{closeAudio:function(){this.$refs.recordAudio.pause(),this.$store.dispatch("setRecordSrc","")}}},M,!1,function(e){n("A/kt")},"data-v-763f12a9",null).exports,j=n("BtRb"),U=n("dOpY"),H=n.n(U),N={data:function(){var e=this;return{activeName:"first",drawer:!1,isPaly:!0,user:{},info:{id:this.$store.getters.user.id,deviceNo:this.$store.getters.user.deviceNo,phone:this.$store.getters.user.phone},path:"/public/images/timg.jpeg",realName:this.$store.getters.user.realName,params:{},headers:{},show:!1,audioContext:"",audioBuffer:"",imgDataUrl:"",uploadUrl:this.$baseUrl,chatStatus:{},isAgent:!1,userInfoShow:!1,rules:{confirmPassword:[{required:!0,validator:function(t,n,i){n&&""!=n?n==e.user.password?i():i(new Error("确认密码与密码必须一致")):i(new Error("确认密码必填"))},trigger:"blur"}],password:[{required:!0,message:"密码必填",trigger:"blur"}]},socket:{}}},created:function(){},mounted:function(){this.imgDataUrl=this.avatar&&""!=this.avatar?this.avatar:this.path},components:{Breadcrumb:d,Hamburger:p,Screenfull:b,myUpload:A,"record-audio":R},computed:c()({},Object(u.b)(["sidebar","name","avatar","device","agentState"]),{chatStatusCss:function(){return this.agentState+"-status"}}),destroyed:function(){},methods:{init_socket:function(){var e=this,t=H()(socketUrl,{path:"",transports:["websocket","xhr-polling","jsonp-polling"]});t.on("connect",function(n){t.emit("subscribe",{topics:[{id:e.$store.state.user.userData.id}]}),t.on("event",function(t){e.handleMessage(t)})}),this.initIsPlay()},initIsPlay:function(){var e=localStorage.getItem("son");this.isPaly="off"!=e},handleMessage:function(e){var t=this;this.$notify({title:e.title,message:e.content,onClick:function(){return t.$router.push({path:"/auth/message"})}}),this.isPaly&&this.play()},toMessage:function(){this.$router.push({path:"/auth/message"})},closeSound:function(){console.log(1),"off"==localStorage.getItem("son")?(localStorage.setItem("son","on"),this.isPaly=!0):(localStorage.setItem("son","off"),this.isPaly=!1)},play:function(){var e=document.getElementById("alarmPlay");e.paused?e.play():e.pause()},showEditUserInfo:function(){this.userInfoShow=!0},submitForm:function(e){this.$store.getters.user.id;var t=this;t.$refs[e].validate(function(e){if(!e)return!1;Object(j.q)(t.user).then(function(e){0==e.code?(t.$message.success("修改成功"),t.userInfoShow=!1):t.$message.error(e.message)})})},cropSuccess:function(e,t){this.imgDataUrl=e},cropUploadSuccess:function(e,t){this.imgDataUrl=config[config.profile].imgUrl+e.data.fileId,this.user.fileId=e.data.fileId,this.user.photo=this.imgDataUrl},cropUploadFail:function(e,t){},open:function(){this.show=!this.show},toggleSideBar:function(){this.$store.dispatch("toggleSideBar")},updateInfo:function(){this.drawer=!this.drawer},logout:function(){this.$store.dispatch("LogOut").then(function(){location.reload()})}}},B={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navbar"},[n("audio",{staticStyle:{display:"none"},attrs:{id:"alarmPlay",src:"/public/alarm.mp3"}}),e._v(" "),n("hamburger",{staticClass:"hamburger-container",attrs:{"toggle-click":e.toggleSideBar,"is-active":e.sidebar.opened}}),e._v(" "),n("div",{staticClass:"right-menu"},["mobile"!==e.device?[n("screenfull",{staticClass:"right-menu-item hover-effect"})]:e._e(),e._v(" "),n("el-dropdown",{staticClass:"avatar-container right-menu-item hover-effect",attrs:{trigger:"click"}},[n("div",{staticClass:"avatar-wrapper"},[e._v("\n          "+e._s(e.realName)+"\n")]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[n("span",{staticStyle:{display:"block"},on:{click:e.showEditUserInfo}},[e._v("修改密码")])]),e._v(" "),n("el-dropdown-item",{attrs:{divided:""}},[n("span",{staticStyle:{display:"block"},on:{click:e.logout}},[e._v("退出登录")])])],1)],1)],2),e._v(" "),n("record-audio"),e._v(" "),n("el-drawer",{attrs:{visible:e.userInfoShow,size:"50%",title:"编辑个人信息","append-to-body":""},on:{"update:visible":function(t){e.userInfoShow=t},opened:e.open}},[n("div",{staticClass:"update-user-info"},[n("el-form",{ref:"userReset",attrs:{model:e.user,rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"新密码",prop:"password"}},[n("el-input",{attrs:{type:"password","show-password":"",placeholder:"新密码"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[n("el-input",{attrs:{type:"password","show-password":"",placeholder:"确认新密码"},model:{value:e.user.confirmPassword,callback:function(t){e.$set(e.user,"confirmPassword",t)},expression:"user.confirmPassword"}})],1)],1),e._v(" "),n("span",{staticClass:"drawer-footer"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitForm("userReset")}}},[e._v("提交")])],1)],1)])],1)},staticRenderFns:[]};var P=n("C7Lr")(N,B,!1,function(e){n("WG8t"),n("JkeP")},"data-v-03c365fe",null).exports,z=n("hBSA"),F=n.n(z),W={name:"MenuItem",functional:!0,props:{icon:{type:String,default:""},title:{type:String,default:""}},render:function(e,t){var n=t.props,i=n.icon,a=n.title,r=[];return i&&r.push(e("i",{class:i})),a&&r.push(e("span",{slot:"title"},[a])),r}},Y=n("C7Lr")(W,null,!1,null,null,null).exports,q=n("E4LH"),K={props:{to:{type:String,required:!0}},methods:{linkProps:function(e){return Object(q.a)(e)?{is:"a",href:e,target:"_blank",rel:"noopener"}:{is:"router-link",to:e}}}},G={render:function(){var e=this.$createElement;return(this._self._c||e)("component",this._b({},"component",this.linkProps(this.to),!1),[this._t("default")],2)},staticRenderFns:[]},Z={name:"SidebarItem",components:{Item:Y,AppLink:n("C7Lr")(K,G,!1,null,null,null).exports},mixins:[{computed:{device:function(){return this.$store.state.app.device}},mounted:function(){this.fixBugIniOS()},methods:{fixBugIniOS:function(){var e=this,t=this.$refs.subMenu;if(t){var n=t.handleMouseleave;t.handleMouseleave=function(t){"mobile"!==e.device&&n(t)}}}}}],props:{item:{type:Object,required:!0},isNest:{type:Boolean,default:!1},basePath:{type:String,default:""}},data:function(){return{onlyOneChild:null}},methods:{childId:function(e){return e.pid+"-"+e.id},resolvePath:function(e){return e?(/^(https?:|mailto:|tel:)/.test(e),e):""}}},X={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menu-wrapper"},[n("el-submenu",{ref:"subMenu",attrs:{index:e.item.url?e.item.url:e.item.code}},[n("template",{slot:"title"},[e.item?n("item",{attrs:{icon:e.item.icon,title:e.item.name}}):e._e()],1),e._v(" "),e._l(e.item.children,function(t){return[[t.children&&t.children.length>0&&"BUTTON"!=t.children[0].type?n("sidebar-item",{key:t.url,staticClass:"nest-menu",attrs:{"is-nest":!0,item:t,"base-path":t.url}}):n("app-link",{key:t.url,attrs:{to:e.resolvePath(t.url)}},[1==t.visible?n("el-menu-item",{attrs:{index:t.url}},[t?n("item",{attrs:{icon:t.icon,title:t.name}}):e._e()],1):e._e()],1)]]})],2)],1)},staticRenderFns:[]},J=n("C7Lr")(Z,X,!1,null,null,null).exports,Q=n("syC2"),ee=n.n(Q),te=n("IcnI"),ne={components:{SidebarItem:J},computed:c()({},Object(u.b)(["menus","sidebar"]),{finalMenus:function(){return this.$store.getters.menus},variables:function(){return ee.a},isCollapse:function(){return!this.sidebar.opened}})},ie={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[t("el-menu",{attrs:{"default-active":this.$route.path,collapse:this.isCollapse,"default-openeds":["/auth","/channels","/customers"],"background-color":this.variables.menuBg,"text-color":this.variables.menuText,"active-text-color":this.variables.menuActiveText,mode:"vertical"}},this._l(this.finalMenus,function(e){return t("sidebar-item",{key:e.url,attrs:{item:e,"base-path":e.url}})}),1)],1)},staticRenderFns:[]},ae=n("C7Lr")(ne,ie,!1,null,null,null).exports,re=n("HzJ8"),se=n.n(re),oe={name:"ScrollPane",data:function(){return{left:0}},methods:{handleScroll:function(e){var t=e.wheelDelta||40*-e.deltaY,n=this.$refs.scrollContainer.$refs.wrap;n.scrollLeft=n.scrollLeft+t/4},moveToTarget:function(e){var t=this.$refs.scrollContainer.$el.offsetWidth,n=this.$refs.scrollContainer.$refs.wrap,i=this.$parent.$refs.tag,a=null,r=null;if(i.length>0&&(a=i[0],r=i[i.length-1]),a===e)n.scrollLeft=0;else if(r===e)n.scrollLeft=n.scrollWidth-t;else{var s=i.findIndex(function(t){return t===e}),o=i[s-1],c=i[s+1],u=c.$el.offsetLeft+c.$el.offsetWidth+4,l=o.$el.offsetLeft-4;u>n.scrollLeft+t?n.scrollLeft=u-t:l<n.scrollLeft&&(n.scrollLeft=l)}}}},ce={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-scrollbar",{ref:"scrollContainer",staticClass:"scroll-container",attrs:{vertical:!1},nativeOn:{wheel:function(t){return t.preventDefault(),e.handleScroll.apply(null,arguments)}}},[e._t("default")],2)},staticRenderFns:[]};var ue={components:{ScrollPane:n("C7Lr")(oe,ce,!1,function(e){n("+pL6")},"data-v-81047428",null).exports},data:function(){return{visible:!1,top:0,left:0,selectedTag:{},affixTags:[]}},computed:{visitedViews:function(){return this.$store.state.tagsView.visitedViews},routers:function(){var e=new Array(this.$store.state.user.menus);!e&&e.length<=0&&(e=[]);return e.push({id:"index",path:"",url:"",children:[{path:"dashboard",url:"dashboard",name:"Dashboard",meta:{title:"工作台",icon:"fa fa-file",noCache:!0,affix:!0}}]}),e}},watch:{$route:function(){this.addTags(),this.moveToCurrentTag()},visible:function(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},mounted:function(){this.initTags(),this.addTags()},methods:{isActive:function(e){return e.path===this.$route.path},filterAffixTags:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",i=[];return e.forEach(function(e){if(e.meta&&e.meta.affix&&i.push({path:F.a.resolve(n,e.path),name:e.name,meta:c()({},e.meta)}),e.children){var r=t.filterAffixTags(e.children,e.path);r.length>=1&&(i=[].concat(a()(i),a()(r)))}}),i},initTags:function(){var e=this.affixTags=this.filterAffixTags(this.routers),t=!0,n=!1,i=void 0;try{for(var a,r=se()(e);!(t=(a=r.next()).done);t=!0){var s=a.value;s.name&&this.$store.dispatch("addVisitedView",s)}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}},addTags:function(){return this.$route.name&&this.$store.dispatch("addView",this.$route),!1},moveToCurrentTag:function(){var e=this,t=this.$refs.tag;this.$nextTick(function(){var n=!0,i=!1,a=void 0;try{for(var r,s=se()(t);!(n=(r=s.next()).done);n=!0){var o=r.value;if(o.to.path===e.$route.path){e.$refs.scrollPane.moveToTarget(o),o.to.fullPath!==e.$route.fullPath&&e.$store.dispatch("updateVisitedView",e.$route);break}}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}})},refreshSelectedTag:function(e){var t=this;this.$store.dispatch("delCachedView",e).then(function(){var n=e.fullPath;t.$nextTick(function(){t.$router.replace({path:"/redirect"+n})})})},closeSelectedTag:function(e){var t=this;this.$store.dispatch("delView",e).then(function(n){var i=n.visitedViews;t.isActive(e)&&t.toLastView(i)})},closeOthersTags:function(){var e=this;this.$router.push(this.selectedTag),this.$store.dispatch("delOthersViews",this.selectedTag).then(function(){e.moveToCurrentTag()})},closeAllTags:function(e){var t=this;this.$store.dispatch("delAllViews").then(function(n){var i=n.visitedViews;t.affixTags.some(function(t){return t.path===e.path})||t.toLastView(i)})},toLastView:function(e){var t=e.slice(-1)[0];t?this.$router.push(t):this.$router.push("/")},openMenu:function(e,t){var n=this.$el.getBoundingClientRect().left,i=this.$el.offsetWidth-105,a=t.clientX-n+15;this.left=a>i?i:a,this.top=t.clientY,this.visible=!0,this.selectedTag=e},closeMenu:function(){this.visible=!1}}},le={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tags-view-container"},[n("scroll-pane",{ref:"scrollPane",staticClass:"tags-view-wrapper"},e._l(e.visitedViews,function(t){return n("router-link",{key:t.path,ref:"tag",refInFor:!0,staticClass:"tags-view-item",class:e.isActive(t)?"active":"",attrs:{to:{path:t.path,query:t.query,fullPath:t.fullPath},tag:"span"},nativeOn:{mouseup:function(n){return"button"in n&&1!==n.button?null:e.closeSelectedTag(t)},contextmenu:function(n){return n.preventDefault(),e.openMenu(t,n)}}},[e._v("\n      "+e._s(t.title)+"\n      "),t.meta.affix?e._e():n("span",{staticClass:"el-icon-close",on:{click:function(n){return n.preventDefault(),n.stopPropagation(),e.closeSelectedTag(t)}}})])}),1),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"contextmenu",style:{left:e.left+"px",top:e.top+"px"}},[n("li",{on:{click:function(t){return e.refreshSelectedTag(e.selectedTag)}}},[e._v("刷新")]),e._v(" "),e.selectedTag.meta&&e.selectedTag.meta.affix?e._e():n("li",{on:{click:function(t){return e.closeSelectedTag(e.selectedTag)}}},[e._v("\n    关闭")]),e._v(" "),n("li",{on:{click:e.closeOthersTags}},[e._v("关闭其他")]),e._v(" "),n("li",{on:{click:function(t){return e.closeAllTags(e.selectedTag)}}},[e._v("关闭全部")])])],1)},staticRenderFns:[]};var de=n("C7Lr")(ue,le,!1,function(e){n("WdgD"),n("A/7e")},"data-v-765a4306",null).exports,he={name:"AppMain",data:function(){return{clientHeight:""}},computed:{cachedViews:function(){return this.$store.state.tagsView.cachedViews},key:function(){return this.$route.fullPath}},methods:{computeHeight:function(){this.clientHeight=""+document.documentElement.clientHeight,this.clientHeight=this.clientHeight-84,document.getElementById("app-main").style.cssText="padding:15px;overflow: scroll;height:"+this.clientHeight+"px;"}},mounted:function(){var e=this;e.computeHeight(),window.onresize=function(){e.computeHeight()}}},fe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"app-main",staticStyle:{padding:"15px",overflow:"scroll"},attrs:{id:"app-main"}},[t("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[t("keep-alive",{attrs:{include:this.cachedViews}},[t("router-view",{key:this.key})],1)],1)],1)},staticRenderFns:[]};var pe=n("C7Lr")(he,fe,!1,function(e){n("w1Of")},"data-v-6faaec72",null).exports,me=document.body,ve={name:"Layout",data:function(){return{questionnaire:"7e2f7a7301fc481980c6d8c6d97ecb2f",customerId:"ca1696cbb1f94b99b4c1906712a45570",contactId:"1122",currentCustomer:{}}},components:{Navbar:P,Sidebar:ae,AppMain:pe,TagsView:de},mixins:[{watch:{$route:function(e){"mobile"===this.device&&this.sidebar.opened&&te.a.dispatch("closeSideBar",{withoutAnimation:!1})}},beforeMount:function(){window.addEventListener("resize",this.resizeHandler)},mounted:function(){this.isMobile()&&(te.a.dispatch("toggleDevice","mobile"),te.a.dispatch("closeSideBar",{withoutAnimation:!0}))},methods:{isMobile:function(){return me.getBoundingClientRect().width-3<1024},resizeHandler:function(){if(!document.hidden){var e=this.isMobile();te.a.dispatch("toggleDevice",e?"mobile":"desktop"),e&&te.a.dispatch("closeSideBar",{withoutAnimation:!0})}}}}],computed:{sidebar:function(){return this.$store.state.app.sidebar},device:function(){return this.$store.state.app.device},classObj:function(){return{hideSidebar:!this.sidebar.opened,openSidebar:this.sidebar.opened,withoutAnimation:this.sidebar.withoutAnimation,mobile:"mobile"===this.device}}},mounted:function(){this.addMask()},methods:{handleClickOutside:function(){this.$store.dispatch("closeSideBar",{withoutAnimation:!1})},addMask:function(){var e=this.$store.state.user.userData.realName,t=document.createElement("canvas");t.id="canvas",t.width="230",t.height="200",this.maskDiv=document.createElement("div");var n=t.getContext("2d");n.font="normal 18px Microsoft Yahei",n.fillStyle="rgba(112, 113, 114, 0.08)",n.rotate(30*Math.PI/180),n.fillText(e,30,20);var i=t.toDataURL("image/png");this.maskDiv.style.position="fixed",this.maskDiv.style.zIndex="9999",this.maskDiv.id="_waterMark",this.maskDiv.style.top="30px",this.maskDiv.style.left="0",this.maskDiv.style.height="100%",this.maskDiv.style.width="100%",this.maskDiv.style.pointerEvents="none",this.maskDiv.style.backgroundImage="URL("+i+")",document.body.appendChild(this.maskDiv)}}},ge={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-wrapper",class:e.classObj},["mobile"===e.device&&e.sidebar.opened?n("div",{staticClass:"drawer-bg",on:{click:e.handleClickOutside}}):e._e(),e._v(" "),n("sidebar",{staticClass:"sidebar-container"}),e._v(" "),n("div",{staticClass:"main-container"},[n("navbar"),e._v(" "),n("tags-view"),e._v(" "),n("app-main")],1)],1)},staticRenderFns:[]};var we=n("C7Lr")(ve,ge,!1,function(e){n("CRao")},"data-v-e4d862e8",null).exports,be=[{path:"/auth",component:we,redirect:"noredirect",name:"auth",children:[{path:"roles",component:function(){return n.e(5).then(n.bind(null,"XCfr"))},name:"roles",meta:{title:"角色管理",noCache:!1}},{path:"users",component:function(){return n.e(2).then(n.bind(null,"ImEA"))},name:"users",meta:{title:"员工管理",noCache:!1}},{path:"menus",component:function(){return n.e(4).then(n.bind(null,"VNrv"))},name:"menus",meta:{title:"菜单管理",noCache:!1}}]}],ye=[{path:"/channels",component:we,redirect:"noredirect",name:"channels",children:[{path:"channel",component:function(){return n.e(1).then(n.bind(null,"xcRn"))},name:"channels",meta:{title:"通道管理",noCache:!1}},{path:"template",component:function(){return n.e(3).then(n.bind(null,"VSCa"))},name:"templates",meta:{title:"模板管理",noCache:!1}}]}],Se=[{path:"/customers",component:we,redirect:"noredirect",name:"customer",children:[{path:"customer",component:function(){return n.e(0).then(n.bind(null,"YZJ+"))},name:"customers",meta:{title:"客户管理",noCache:!1}}]}];n.d(t,"b",function(){return Ce}),n.d(t,"a",function(){return Ee}),r.default.use(s.a);var _e=s.a.prototype.replace;s.a.prototype.replace=function(e){return _e.call(this,e).catch(function(e){return e})};var Ce=[{path:"/redirect",component:we,hidden:!0,children:[{path:"/redirect/:path*",component:function(){return n.e(10).then(n.bind(null,"v86N"))}}]},{path:"",component:we,redirect:"dashboard",children:[{path:"dashboard",component:function(){return n.e(8).then(n.bind(null,"ARoL"))},name:"Dashboard",meta:{title:"工作台",icon:"fa fa-file",noCache:!0,affix:!0}}]},{path:"/login",component:function(){return n.e(6).then(n.bind(null,"W2Q3"))},hidden:!0},{path:"/404",component:function(){return n.e(9).then(n.bind(null,"AejC"))},hidden:!0},{path:"/401",component:function(){return n.e(7).then(n.bind(null,"eRLo"))},hidden:!0}],Ee=(t.c=new s.a({mode:"history",scrollBehavior:function(){return{y:0}},routes:Ce}),[].concat(a()(be),a()(ye),a()(Se),[{path:"*",redirect:"/404",hidden:!0}]))},eTQh:function(e,t){},i3vg:function(e,t){},syC2:function(e,t){e.exports={menuText:"rgba(255,255,255,0.65)",menuActiveText:"#fff",subMenuActiveText:"#fff",menuBg:"#24262f",menuHover:"#263445",subMenuBg:"#191b21",subMenuHover:"#001528",sideBarWidth:"180px"}},vLgD:function(e,t,n){"use strict";var i=n("rVsN"),a=n.n(i),r=n("L+OJ"),s=n.n(r),o=n("+CHF"),c=(n.n(o),n("IcnI")),u=n("TIfe"),l=n("yf3K"),d=n("cN5t"),h=(n.n(d),s.a.create({baseURL:l.default.prototype.$baseUrl,timeout:6e4,withCredentials:!1,responseType:"json",responseEncoding:"utf-8",transformResponse:[function(e){}]}));s.a.defaults.withCredentials=!1;h.interceptors.request.use(function(e){return e.headers["Content-Type"]="application/json;charset=utf-8",c.a.getters.token&&(e.headers.Authorization=Object(u.c)()),"get"===e.method&&(e.data=!0),e},function(e){a.a.reject(e)}),h.interceptors.response.use(function(e){var t=void 0;return(t=void 0==e.data?e.request.response:e.data)&&1==t.status?(Object(o.Message)({message:t.message,type:"error",duration:1e3}),c.a.dispatch("FedLogOut").then(function(){location.reload()}),a.a.reject("error")):t},function(e){return 401==e.response.status?(c.a.dispatch("FedLogOut").then(function(){location.reload()}),a.a.reject("error")):(Object(o.Message)({message:e.message,type:"error",duration:5e3}),a.a.reject(e))}),t.a=h},ve9D:function(e,t){},w1Of:function(e,t){},yh13:function(e,t){e.exports={menuText:"rgba(255,255,255,0.65)",menuActiveText:"#fff",subMenuActiveText:"#fff",menuBg:"#24262f",menuHover:"#263445",subMenuBg:"#191b21",subMenuHover:"#001528",sideBarWidth:"180px"}}},["NHnr"]);
//# sourceMappingURL=app.b63d84823b1a42ef2722.js.map